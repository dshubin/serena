  <step-type name="Install Cookbook From Site">
    <description>
    	This step allows the user to install a Chef cookbooks from the 
    	cookbooks community hosted at http://community.opscode.com/. 
    </description>
    <properties>
      <!-- Required Field -->
      <property name="cookbookName" required="true">  
        <property-ui type="textBox" label="Cookbook Name" description="The name of the cookbook to be installed"/>
      </property>
      <!-- Optional Fields -->
      <property name="cookbookVersion" required="false">
        <property-ui type="textBox" label="Cookbook Version" description="The version of the cookbook to be installed"/>
      </property>     
      <property name="useCurrentBranch" required="false">
        <property-ui type="checkBox" label="Use Current Branch" description="Indicates that the current branch will be used."/>
      </property>
      <property name="defaultBranchName" required="false">
        <property-ui type="textBox" label="Default Branch Name" description="The name of the default branch. This will default to the master branch"/>
      </property>
      <property name="skipDependencies" required="false">
        <property-ui type="checkBox" label="Skip Dependencies" description="Indicates that all cookbooks to which the installed cookbook has a dependency will not be installed"/>
      </property>
      <property name="path" required="false">
        <property-ui type="testField" label="Cookbook Installation Path" description="The directory in which the cookbook will be created. This can be colon separated path."/>
      </property>
    </properties>
    <post-processing><![CDATA[
        if (properties.get("exitCode") != 0) {
            properties.put("Status", "Failure");
        }
        else {
            properties.put("Status", "Success");
        }
     ]]></post-processing>

    <command program="${GROOVY_HOME}/bin/groovy">
      <arg file="installCookbookFromSite.groovy"/>
      <arg file="${PLUGIN_INPUT_PROPS}"/>
      <arg file="${PLUGIN_OUTPUT_PROPS}"/>
    </command>
    
  </step-type>